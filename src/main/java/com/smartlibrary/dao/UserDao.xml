<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smartlibrary.dao.UserDao">
	<!-- 查询所有  -->
	<select id="getUserList" parameterType="User" resultType="User">
		select account as account,
			   password as password,
			   name as name,
			   hobbyid as hobbyid,
			   sex as sex,
			   photourl as photourl,
			   nickname as nickname
			   from user
	</select>
	<!-- 查询单个  -->
	<select id="getOneUser" parameterType="User" resultType="User">
		select user.account as account,
			   user.password as password,
			   user.name as name,
			   user.hobbyid as hobbyid,
			   hobby.name as hobbyName,
			   user.sex as sex,
			   user.photourl as photourl,
			   user.nickname as nickname
			   from 
			   user
			   left join
			   hobby
			   ON
			   user.hobbyid = hobby.hobbyid
			   where account = #{account}
	</select>
	<!-- 增加单个  -->
	<insert id="addUser" parameterType="User" useGeneratedKeys="true" keyProperty="account">
		insert into
		user (
				account,
				password,
				name,
				hobbyid,
				sex,
				photourl,
			  	nickname
			   	)
			   	values (
			   	#{account},
			   	#{password},
			   	#{name},
			   	#{hobbyid},
			   	#{sex},
			   	#{photourl},
			   	#{nickname}
			   	)
	</insert>
	<!-- 修改单个  -->
	<update id="editUser" parameterType="User" useGeneratedKeys="true" keyProperty="account">
		update
		user
		set password 	= #{password},
			name 		= #{name},
			hobbyid 	= #{hobbyid},
			sex 		= #{sex},
			photourl 	= #{photourl},
			nickname 	= #{nickname}
		where account = #{account}
	</update>
	<!-- 修改单个昵称  -->
	<update id="editNickname" parameterType="User" useGeneratedKeys="true" keyProperty="account">
		update
		user
		set nickname 	= #{nickname}
		where account = #{account}
	</update>
	<!-- 修改单个性别  -->
	<update id="editSex" parameterType="User" useGeneratedKeys="true" keyProperty="account">
		update
		user
		set sex 		= #{sex}
		where account = #{account}
	</update>
	<!-- 修改单个兴趣  -->
	<update id="editHobbyid" parameterType="User" useGeneratedKeys="true" keyProperty="account">
		update
		user
		set hobbyid 	= #{hobbyid}
		where account = #{account}
	</update>
</mapper>