<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smartlibrary.dao.IdentDao">
	<!-- 查询所有  -->
	<select id="getIdentList" parameterType="Ident" resultType="Ident">
		select identid as identid,
			   school_id as school_id,
			   college_id as college_id,
			   major_id as major_id,
			   account as account,
			   studentid as studentid,
			   szLogonName as szLogonName,
			   grade as grade,
			   state as state
			   from ident
	</select>
	<!-- 查询单个（通过应用帐号）  -->
	<select id="getOneIdent" parameterType="Ident" resultType="Ident">
		select identid as identid,
			   account as account,
			   szLogonName as szLogonName,
			   schoolName as schoolName,
			   studentid as studentid,  
			   trueName as trueName,
			   collegeName as collegeName,
			   majorName as majorName,
			   sex as sex,
			   ident as ident,
			   enrolYear as enrolYear,
			   schoolCode as schoolCode

			   from ident
			   where account = #{account}
	</select>
	
	<!-- 查询是否已绑定学校帐号，避免学校帐号重复  -->
	<select id="getOneLogonName" parameterType="Ident" resultType="Ident">
		select identid as identid,
			   account as account,
			   szLogonName as szLogonName,
			   schoolName as schoolName,
			   studentid as studentid,  
			   trueName as trueName,
			   collegeName as collegeName,
			   majorName as majorName,
			   sex as sex,
			   ident as ident,
			   enrolYear as enrolYear,
			   schoolCode as schoolCode

			   from ident
			   where szLogonName = #{szLogonName}
	</select>
	
	<!-- 增加单个  -->
	<insert id="addIdent" parameterType="Ident" useGeneratedKeys="true" keyProperty="identid">
		insert into
		ident (
				account,
				szLogonName,
				schoolName,
				studentid,		
				trueName,
				collegeName,
				majorName,
				sex,
				ident,
				enrolYear,
				schoolCode
			   	)
			   	values (
			   	#{account},
			   	#{szLogonName},
			   	#{schoolName},
			   	#{studentid},
			   	#{trueName},
			   	#{collegeName},
			   	#{majorName},
			   	#{sex},
			   	#{ident},
			   	#{enrolYear},
			   	#{schoolCode}
			   	
			   	)
	</insert>
	<!-- 修改单个  -->
	<update id="editIdent" parameterType="Ident" useGeneratedKeys="true" keyProperty="identid">
		update
		ident
		set 
			szLogonName = #{szLogonName},
			schoolName 	= #{schoolName},
			studentid 	= #{studentid},		
			trueName 	= #{trueName},
			collegeName = #{collegeName},
			majorName 	= #{majorName},
			sex 		= #{sex},
			ident 		= #{ident},
			enrolYear 	= #{enrolYear},
			schoolCode  = #{schoolCode}		
			
		where account = #{account}
	</update>
</mapper>